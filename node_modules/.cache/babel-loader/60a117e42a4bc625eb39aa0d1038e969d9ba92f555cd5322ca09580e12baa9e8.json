{"ast":null,"code":"var _jsxFileName = \"C:\\\\assigment\\\\EduSyncApiSolution\\\\edusync-front\\\\src\\\\pages\\\\TakeAssessmentPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport api from '../api/axios';\nimport { motion } from 'framer-motion';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TakeAssessmentPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [assessment, setAssessment] = useState(null);\n  const [questions, setQuestions] = useState([]);\n  const [answers, setAnswers] = useState({});\n  const [submitted, setSubmitted] = useState(false);\n  const [score, setScore] = useState(null);\n  const [startTime, setStartTime] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [resultSubmitted, setResultSubmitted] = useState(false);\n  const navigate = useNavigate();\n\n  // Function to get auth headers\n  const getAuthHeaders = () => {\n    const token = localStorage.getItem('token') || localStorage.getItem('authToken') || localStorage.getItem('accessToken');\n    if (!token) {\n      throw new Error('No authentication token found. Please log in again.');\n    }\n    return {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    };\n  };\n\n  // Function to parse formatted text questions back to JSON format\n  const parseFormattedQuestions = questionText => {\n    if (!questionText || questionText.trim() === '') return [];\n    const questionBlocks = questionText.split('\\n\\n').filter(block => block.trim() !== '');\n    const parsedQuestions = [];\n    for (const block of questionBlocks) {\n      const lines = block.split('\\n').map(line => line.trim()).filter(line => line !== '');\n      if (lines.length < 3) continue;\n      try {\n        // Extract question text (remove \"Q1: \" prefix)\n        const questionLine = lines[0];\n        const questionText = questionLine.replace(/^Q\\d+:\\s*/, '').trim();\n\n        // Extract options (remove \"Options: \" prefix and split by comma)\n        const optionsLine = lines.find(line => line.startsWith('Options:'));\n        if (!optionsLine) continue;\n        const optionsText = optionsLine.replace(/^Options:\\s*/, '').trim();\n        const options = optionsText.split(',').map(opt => opt.trim()).filter(opt => opt !== '');\n\n        // Extract correct answer (remove \"Answer: \" prefix)\n        const answerLine = lines.find(line => line.startsWith('Answer:'));\n        if (!answerLine) continue;\n        const correctAnswer = answerLine.replace(/^Answer:\\s*/, '').trim();\n        if (questionText && options.length > 0 && correctAnswer) {\n          parsedQuestions.push({\n            questionText,\n            options,\n            correctAnswer\n          });\n        }\n      } catch (err) {\n        console.warn('Failed to parse question block:', block, err);\n        continue;\n      }\n    }\n    return parsedQuestions;\n  };\n  useEffect(() => {\n    const fetchAssessment = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const headers = getAuthHeaders();\n        const res = await api.get(`/Assessments/${id}`, {\n          headers\n        });\n        setAssessment(res.data);\n\n        // Handle different question formats\n        let parsedQuestions = [];\n        if (res.data.question) {\n          // First, try to parse as JSON (in case it's already JSON)\n          try {\n            parsedQuestions = JSON.parse(res.data.question);\n            // Ensure it's an array\n            if (!Array.isArray(parsedQuestions)) {\n              parsedQuestions = [];\n            }\n          } catch (jsonErr) {\n            // If JSON parsing fails, parse as formatted text\n            console.log('Parsing as formatted text...');\n            parsedQuestions = parseFormattedQuestions(res.data.question);\n          }\n        }\n        console.log('Parsed questions:', parsedQuestions);\n        setQuestions(parsedQuestions);\n        setStartTime(Date.now());\n      } catch (err) {\n        var _err$response, _err$response2;\n        console.error('Failed to load assessment', err);\n        if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n          setError('Authentication failed. Please log in again.');\n        } else if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 403) {\n          setError('You don\\'t have permission to access this assessment.');\n        } else if (err.message.includes('No authentication token')) {\n          setError(err.message);\n        } else {\n          setError('Failed to load assessment. Please try again later.');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (id) {\n      fetchAssessment();\n    }\n  }, [id]);\n  const handleOptionSelect = (qIndex, option) => {\n    if (submitted) return;\n    setAnswers(prev => ({\n      ...prev,\n      [qIndex]: option\n    }));\n  };\n  const handleSubmit = async () => {\n    if (submitted || questions.length === 0) return;\n    try {\n      let correct = 0;\n      questions.forEach((q, i) => {\n        if (answers[i] === q.correctAnswer) correct++;\n      });\n      const calculatedScore = Math.round(correct / questions.length * assessment.maxScore);\n      setScore(calculatedScore);\n      setSubmitted(true);\n      const timeTaken = Math.floor((Date.now() - startTime) / 1000);\n\n      // Store the result locally first\n      const resultData = {\n        assessmentId: assessment.assessmentId,\n        assessmentTitle: assessment.title,\n        score: calculatedScore,\n        maxScore: assessment.maxScore,\n        timeTaken,\n        attemptDate: new Date().toISOString(),\n        questions: questions.length,\n        correctAnswers: correct\n      };\n\n      // Try to store in localStorage as backup\n      try {\n        const existingResults = JSON.parse(localStorage.getItem('userResults') || '[]');\n        existingResults.push(resultData);\n        localStorage.setItem('userResults', JSON.stringify(existingResults));\n      } catch (storageErr) {\n        console.warn('Failed to store result locally:', storageErr);\n      }\n\n      // Attempt to submit to backend (this may fail with current backend setup)\n      try {\n        const headers = getAuthHeaders();\n\n        // Try to submit result to backend\n        await api.post('/Results', {\n          assessmentId: assessment.assessmentId,\n          userId: localStorage.getItem('userId'),\n          score: calculatedScore,\n          attemptDate: new Date().toISOString(),\n          timeTaken\n        }, {\n          headers\n        });\n        console.log('Result submitted successfully to backend');\n        setResultSubmitted(true);\n      } catch (submitErr) {\n        var _submitErr$response, _submitErr$response2;\n        console.warn('Failed to submit to backend, but result is stored locally:', submitErr);\n\n        // Don't show error to user since we have local storage as backup\n        // The result is still calculated and shown\n        setResultSubmitted(false);\n\n        // Show a subtle message about the result being saved locally\n        if (((_submitErr$response = submitErr.response) === null || _submitErr$response === void 0 ? void 0 : _submitErr$response.status) === 403 || ((_submitErr$response2 = submitErr.response) === null || _submitErr$response2 === void 0 ? void 0 : _submitErr$response2.status) === 401) {\n          console.log('Backend submission failed due to permissions, using local storage');\n        }\n      }\n    } catch (err) {\n      console.error('Failed to process assessment result:', err);\n      alert('Failed to process your assessment. Please try again.');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 max-w-4xl mx-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center items-center h-64\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 max-w-4xl mx-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-bold mb-2\",\n          children: \"Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          className: \"mt-3 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",\n          children: \"Retry\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this);\n  }\n  if (!assessment) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"p-6 text-slate-500\",\n    children: \"Loading assessment...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 27\n  }, this);\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: \"p-6 max-w-4xl mx-auto\",\n    initial: {\n      opacity: 0,\n      y: 20\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    },\n    transition: {\n      duration: 0.5\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-indigo-600 mb-6 text-center\",\n      children: assessment.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), submitted && /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"text-center bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md mb-6\",\n      initial: {\n        scale: 0.95,\n        opacity: 0\n      },\n      animate: {\n        scale: 1,\n        opacity: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl text-green-600 dark:text-green-400 font-semibold mb-2\",\n        children: [\"\\uD83C\\uDF89 You scored \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: score\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 27\n        }, this), \" / \", assessment.maxScore]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-slate-600 dark:text-slate-400 mb-4\",\n        children: [\"\\u23F1\\uFE0F Time Taken: \", Math.floor((Date.now() - startTime) / 1000), \" seconds\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this), !resultSubmitted && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-orange-600 dark:text-orange-400 mb-3\",\n        children: \"\\u2139\\uFE0F Result saved locally (backend submission may require instructor permissions)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/student/results'),\n        className: \"bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-5 rounded-lg transition\",\n        children: \"View My Results\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }, this), questions.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-slate-500 dark:text-slate-400 text-lg mb-4\",\n        children: \"No questions found for this assessment.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-slate-400 dark:text-slate-500 text-sm\",\n        children: \"The assessment may not have been set up properly or the questions are in an unsupported format.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(motion.form, {\n        className: \"space-y-6\",\n        initial: \"hidden\",\n        animate: \"visible\",\n        variants: {\n          visible: {\n            transition: {\n              staggerChildren: 0.1\n            }\n          }\n        },\n        children: questions.map((q, index) => {\n          const selected = answers[index];\n          const isCorrect = selected === q.correctAnswer;\n          return /*#__PURE__*/_jsxDEV(motion.div, {\n            className: `p-5 rounded-xl shadow border transition ${submitted ? isCorrect ? 'bg-green-50 border-green-300 dark:bg-green-900 dark:border-green-700' : 'bg-red-50 border-red-300 dark:bg-red-900 dark:border-red-700' : 'bg-white border-purple-200 dark:bg-slate-800 dark:border-slate-700'}`,\n            initial: {\n              opacity: 0,\n              y: 10\n            },\n            animate: {\n              opacity: 1,\n              y: 0\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold mb-3 text-indigo-700 dark:text-indigo-300\",\n              children: [\"Q\", index + 1, \". \", q.questionText]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: q.options && q.options.map((option, oIndex) => /*#__PURE__*/_jsxDEV(\"label\", {\n                className: `flex items-center gap-2 text-sm cursor-pointer ${submitted && option === q.correctAnswer ? 'text-green-700 dark:text-green-300' : submitted && option === selected && option !== q.correctAnswer ? 'text-red-600 dark:text-red-300' : 'text-slate-700 dark:text-slate-300'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: `question-${index}`,\n                  value: option,\n                  disabled: submitted,\n                  checked: selected === option,\n                  onChange: () => handleOptionSelect(index, option),\n                  className: \"accent-indigo-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 25\n                }, this), option]\n              }, oIndex, true, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 19\n            }, this), submitted && selected !== q.correctAnswer && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 text-sm text-red-600 dark:text-red-400\",\n              children: [\"Correct Answer: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: q.correctAnswer\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 39\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }, this), !submitted && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        disabled: Object.keys(answers).length === 0,\n        className: `mt-8 block mx-auto px-6 py-2 rounded-lg transition font-semibold ${Object.keys(answers).length === 0 ? 'bg-gray-400 text-gray-600 cursor-not-allowed' : 'bg-green-600 hover:bg-green-700 text-white'}`,\n        children: \"Submit Assessment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 5\n  }, this);\n};\n_s(TakeAssessmentPage, \"FA/6ywUXQvyIaSfP3dQ76RcL1BI=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = TakeAssessmentPage;\nexport default TakeAssessmentPage;\nvar _c;\n$RefreshReg$(_c, \"TakeAssessmentPage\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","api","motion","jsxDEV","_jsxDEV","Fragment","_Fragment","TakeAssessmentPage","_s","id","assessment","setAssessment","questions","setQuestions","answers","setAnswers","submitted","setSubmitted","score","setScore","startTime","setStartTime","loading","setLoading","error","setError","resultSubmitted","setResultSubmitted","navigate","getAuthHeaders","token","localStorage","getItem","Error","parseFormattedQuestions","questionText","trim","questionBlocks","split","filter","block","parsedQuestions","lines","map","line","length","questionLine","replace","optionsLine","find","startsWith","optionsText","options","opt","answerLine","correctAnswer","push","err","console","warn","fetchAssessment","headers","res","get","data","question","JSON","parse","Array","isArray","jsonErr","log","Date","now","_err$response","_err$response2","response","status","message","includes","handleOptionSelect","qIndex","option","prev","handleSubmit","correct","forEach","q","i","calculatedScore","Math","round","maxScore","timeTaken","floor","resultData","assessmentId","assessmentTitle","title","attemptDate","toISOString","correctAnswers","existingResults","setItem","stringify","storageErr","post","userId","submitErr","_submitErr$response","_submitErr$response2","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","div","initial","opacity","y","animate","transition","duration","scale","form","variants","visible","staggerChildren","index","selected","isCorrect","oIndex","type","name","value","disabled","checked","onChange","Object","keys","_c","$RefreshReg$"],"sources":["C:/assigment/EduSyncApiSolution/edusync-front/src/pages/TakeAssessmentPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport api from '../api/axios';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst TakeAssessmentPage = () => {\r\n  const { id } = useParams();\r\n  const [assessment, setAssessment] = useState(null);\r\n  const [questions, setQuestions] = useState([]);\r\n  const [answers, setAnswers] = useState({});\r\n  const [submitted, setSubmitted] = useState(false);\r\n  const [score, setScore] = useState(null);\r\n  const [startTime, setStartTime] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [resultSubmitted, setResultSubmitted] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // Function to get auth headers\r\n  const getAuthHeaders = () => {\r\n    const token = localStorage.getItem('token') || localStorage.getItem('authToken') || localStorage.getItem('accessToken');\r\n    if (!token) {\r\n      throw new Error('No authentication token found. Please log in again.');\r\n    }\r\n    return {\r\n      'Authorization': `Bearer ${token}`,\r\n      'Content-Type': 'application/json'\r\n    };\r\n  };\r\n\r\n  // Function to parse formatted text questions back to JSON format\r\n  const parseFormattedQuestions = (questionText) => {\r\n    if (!questionText || questionText.trim() === '') return [];\r\n    \r\n    const questionBlocks = questionText.split('\\n\\n').filter(block => block.trim() !== '');\r\n    const parsedQuestions = [];\r\n\r\n    for (const block of questionBlocks) {\r\n      const lines = block.split('\\n').map(line => line.trim()).filter(line => line !== '');\r\n      if (lines.length < 3) continue;\r\n\r\n      try {\r\n        // Extract question text (remove \"Q1: \" prefix)\r\n        const questionLine = lines[0];\r\n        const questionText = questionLine.replace(/^Q\\d+:\\s*/, '').trim();\r\n\r\n        // Extract options (remove \"Options: \" prefix and split by comma)\r\n        const optionsLine = lines.find(line => line.startsWith('Options:'));\r\n        if (!optionsLine) continue;\r\n        \r\n        const optionsText = optionsLine.replace(/^Options:\\s*/, '').trim();\r\n        const options = optionsText.split(',').map(opt => opt.trim()).filter(opt => opt !== '');\r\n\r\n        // Extract correct answer (remove \"Answer: \" prefix)\r\n        const answerLine = lines.find(line => line.startsWith('Answer:'));\r\n        if (!answerLine) continue;\r\n        \r\n        const correctAnswer = answerLine.replace(/^Answer:\\s*/, '').trim();\r\n\r\n        if (questionText && options.length > 0 && correctAnswer) {\r\n          parsedQuestions.push({\r\n            questionText,\r\n            options,\r\n            correctAnswer\r\n          });\r\n        }\r\n      } catch (err) {\r\n        console.warn('Failed to parse question block:', block, err);\r\n        continue;\r\n      }\r\n    }\r\n\r\n    return parsedQuestions;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchAssessment = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        const headers = getAuthHeaders();\r\n        const res = await api.get(`/Assessments/${id}`, { headers });\r\n        setAssessment(res.data);\r\n\r\n        // Handle different question formats\r\n        let parsedQuestions = [];\r\n        \r\n        if (res.data.question) {\r\n          // First, try to parse as JSON (in case it's already JSON)\r\n          try {\r\n            parsedQuestions = JSON.parse(res.data.question);\r\n            // Ensure it's an array\r\n            if (!Array.isArray(parsedQuestions)) {\r\n              parsedQuestions = [];\r\n            }\r\n          } catch (jsonErr) {\r\n            // If JSON parsing fails, parse as formatted text\r\n            console.log('Parsing as formatted text...');\r\n            parsedQuestions = parseFormattedQuestions(res.data.question);\r\n          }\r\n        }\r\n\r\n        console.log('Parsed questions:', parsedQuestions);\r\n        setQuestions(parsedQuestions);\r\n        setStartTime(Date.now());\r\n      } catch (err) {\r\n        console.error('Failed to load assessment', err);\r\n        if (err.response?.status === 401) {\r\n          setError('Authentication failed. Please log in again.');\r\n        } else if (err.response?.status === 403) {\r\n          setError('You don\\'t have permission to access this assessment.');\r\n        } else if (err.message.includes('No authentication token')) {\r\n          setError(err.message);\r\n        } else {\r\n          setError('Failed to load assessment. Please try again later.');\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (id) {\r\n      fetchAssessment();\r\n    }\r\n  }, [id]);\r\n\r\n  const handleOptionSelect = (qIndex, option) => {\r\n    if (submitted) return;\r\n    setAnswers(prev => ({ ...prev, [qIndex]: option }));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (submitted || questions.length === 0) return;\r\n\r\n    try {\r\n      let correct = 0;\r\n      questions.forEach((q, i) => {\r\n        if (answers[i] === q.correctAnswer) correct++;\r\n      });\r\n\r\n      const calculatedScore = Math.round((correct / questions.length) * assessment.maxScore);\r\n      setScore(calculatedScore);\r\n      setSubmitted(true);\r\n\r\n      const timeTaken = Math.floor((Date.now() - startTime) / 1000);\r\n\r\n      // Store the result locally first\r\n      const resultData = {\r\n        assessmentId: assessment.assessmentId,\r\n        assessmentTitle: assessment.title,\r\n        score: calculatedScore,\r\n        maxScore: assessment.maxScore,\r\n        timeTaken,\r\n        attemptDate: new Date().toISOString(),\r\n        questions: questions.length,\r\n        correctAnswers: correct\r\n      };\r\n\r\n      // Try to store in localStorage as backup\r\n      try {\r\n        const existingResults = JSON.parse(localStorage.getItem('userResults') || '[]');\r\n        existingResults.push(resultData);\r\n        localStorage.setItem('userResults', JSON.stringify(existingResults));\r\n      } catch (storageErr) {\r\n        console.warn('Failed to store result locally:', storageErr);\r\n      }\r\n\r\n      // Attempt to submit to backend (this may fail with current backend setup)\r\n      try {\r\n        const headers = getAuthHeaders();\r\n        \r\n        // Try to submit result to backend\r\n        await api.post('/Results', {\r\n          assessmentId: assessment.assessmentId,\r\n          userId: localStorage.getItem('userId'),\r\n          score: calculatedScore,\r\n          attemptDate: new Date().toISOString(),\r\n          timeTaken,\r\n        }, { headers });\r\n\r\n        console.log('Result submitted successfully to backend');\r\n        setResultSubmitted(true);\r\n      } catch (submitErr) {\r\n        console.warn('Failed to submit to backend, but result is stored locally:', submitErr);\r\n        \r\n        // Don't show error to user since we have local storage as backup\r\n        // The result is still calculated and shown\r\n        setResultSubmitted(false);\r\n        \r\n        // Show a subtle message about the result being saved locally\r\n        if (submitErr.response?.status === 403 || submitErr.response?.status === 401) {\r\n          console.log('Backend submission failed due to permissions, using local storage');\r\n        }\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('Failed to process assessment result:', err);\r\n      alert('Failed to process your assessment. Please try again.');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-6 max-w-4xl mx-auto\">\r\n        <div className=\"flex justify-center items-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"p-6 max-w-4xl mx-auto\">\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg\">\r\n          <h3 className=\"font-bold mb-2\">Error</h3>\r\n          <p>{error}</p>\r\n          <button \r\n            onClick={() => window.location.reload()} \r\n            className=\"mt-3 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\"\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!assessment) return <p className=\"p-6 text-slate-500\">Loading assessment...</p>;\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"p-6 max-w-4xl mx-auto\"\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.5 }}\r\n    >\r\n      <h2 className=\"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-indigo-600 mb-6 text-center\">\r\n        {assessment.title}\r\n      </h2>\r\n\r\n      {submitted && (\r\n        <motion.div\r\n          className=\"text-center bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md mb-6\"\r\n          initial={{ scale: 0.95, opacity: 0 }}\r\n          animate={{ scale: 1, opacity: 1 }}\r\n        >\r\n          <p className=\"text-xl text-green-600 dark:text-green-400 font-semibold mb-2\">\r\n            🎉 You scored <strong>{score}</strong> / {assessment.maxScore}\r\n          </p>\r\n          <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-4\">\r\n            ⏱️ Time Taken: {Math.floor((Date.now() - startTime) / 1000)} seconds\r\n          </p>\r\n          {!resultSubmitted && (\r\n            <p className=\"text-xs text-orange-600 dark:text-orange-400 mb-3\">\r\n              ℹ️ Result saved locally (backend submission may require instructor permissions)\r\n            </p>\r\n          )}\r\n          <button\r\n            onClick={() => navigate('/student/results')}\r\n            className=\"bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-5 rounded-lg transition\"\r\n          >\r\n            View My Results\r\n          </button>\r\n        </motion.div>\r\n      )}\r\n\r\n      {questions.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <p className=\"text-slate-500 dark:text-slate-400 text-lg mb-4\">\r\n            No questions found for this assessment.\r\n          </p>\r\n          <p className=\"text-slate-400 dark:text-slate-500 text-sm\">\r\n            The assessment may not have been set up properly or the questions are in an unsupported format.\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <motion.form\r\n            className=\"space-y-6\"\r\n            initial=\"hidden\"\r\n            animate=\"visible\"\r\n            variants={{\r\n              visible: { transition: { staggerChildren: 0.1 } },\r\n            }}\r\n          >\r\n            {questions.map((q, index) => {\r\n              const selected = answers[index];\r\n              const isCorrect = selected === q.correctAnswer;\r\n\r\n              return (\r\n                <motion.div\r\n                  key={index}\r\n                  className={`p-5 rounded-xl shadow border transition ${\r\n                    submitted\r\n                      ? isCorrect\r\n                        ? 'bg-green-50 border-green-300 dark:bg-green-900 dark:border-green-700'\r\n                        : 'bg-red-50 border-red-300 dark:bg-red-900 dark:border-red-700'\r\n                      : 'bg-white border-purple-200 dark:bg-slate-800 dark:border-slate-700'\r\n                  }`}\r\n                  initial={{ opacity: 0, y: 10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                >\r\n                  <h3 className=\"font-semibold mb-3 text-indigo-700 dark:text-indigo-300\">\r\n                    Q{index + 1}. {q.questionText}\r\n                  </h3>\r\n                  <div className=\"space-y-2\">\r\n                    {q.options && q.options.map((option, oIndex) => (\r\n                      <label\r\n                        key={oIndex}\r\n                        className={`flex items-center gap-2 text-sm cursor-pointer ${\r\n                          submitted && option === q.correctAnswer\r\n                            ? 'text-green-700 dark:text-green-300'\r\n                            : submitted && option === selected && option !== q.correctAnswer\r\n                            ? 'text-red-600 dark:text-red-300'\r\n                            : 'text-slate-700 dark:text-slate-300'\r\n                        }`}\r\n                      >\r\n                        <input\r\n                          type=\"radio\"\r\n                          name={`question-${index}`}\r\n                          value={option}\r\n                          disabled={submitted}\r\n                          checked={selected === option}\r\n                          onChange={() => handleOptionSelect(index, option)}\r\n                          className=\"accent-indigo-600\"\r\n                        />\r\n                        {option}\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {submitted && selected !== q.correctAnswer && (\r\n                    <p className=\"mt-2 text-sm text-red-600 dark:text-red-400\">\r\n                      Correct Answer: <strong>{q.correctAnswer}</strong>\r\n                    </p>\r\n                  )}\r\n                </motion.div>\r\n              );\r\n            })}\r\n          </motion.form>\r\n\r\n          {!submitted && (\r\n            <button\r\n              onClick={handleSubmit}\r\n              disabled={Object.keys(answers).length === 0}\r\n              className={`mt-8 block mx-auto px-6 py-2 rounded-lg transition font-semibold ${\r\n                Object.keys(answers).length === 0\r\n                  ? 'bg-gray-400 text-gray-600 cursor-not-allowed'\r\n                  : 'bg-green-600 hover:bg-green-700 text-white'\r\n              }`}\r\n            >\r\n              Submit Assessment\r\n            </button>\r\n          )}\r\n        </>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default TakeAssessmentPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}