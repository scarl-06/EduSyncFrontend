{"ast":null,"code":"import _objectSpread from\"C:/assigment/EduSyncApiSolution/edusync-front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import api from'../api/axios';import{motion}from'framer-motion';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditAssessmentPage=()=>{const{id}=useParams();const navigate=useNavigate();const[form,setForm]=useState({courseId:'',title:'',maxScore:100,questions:''});const[courses,setCourses]=useState([]);const[errorMessage,setErrorMessage]=useState('');useEffect(()=>{const fetchData=async()=>{try{const[assessmentRes,coursesRes]=await Promise.all([api.get(\"/Assessments/\".concat(id)),api.get('/Course')]);const a=assessmentRes.data;setForm({courseId:a.courseId||'',title:a.title||'',maxScore:a.maxScore||100,questions:a.questions||''});setCourses(coursesRes.data);}catch(err){console.error('Error loading assessment or courses:',err);setErrorMessage('Failed to load assessment or courses. Please try again later.');}};fetchData();},[id]);const handleChange=e=>{const{name,value}=e.target;setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleUpdateAssessment=async e=>{e.preventDefault();setErrorMessage('');try{JSON.parse(form.questions);// Validate JSON format\nconst payload=_objectSpread(_objectSpread({},form),{},{question:form.questions// in case backend uses `question`\n});await api.put(\"/Assessments/\".concat(id),payload);navigate('/assessments');}catch(error){setErrorMessage('❗ Please enter valid JSON format in the \"Questions\" field.');console.error('Update failed:',error);}};return/*#__PURE__*/_jsxs(motion.div,{className:\"p-6 max-w-3xl mx-auto bg-gradient-to-br from-white via-green-50 to-emerald-100 dark:from-slate-800 dark:via-slate-900 dark:to-slate-800 rounded-xl shadow-xl\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-center mb-6 bg-gradient-to-r from-emerald-500 to-teal-500 text-transparent bg-clip-text\",children:\"\\u270F\\uFE0F Edit Assessment\"}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 dark:text-red-400 font-medium mb-4 text-center\",children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdateAssessment,className:\"space-y-4 bg-white dark:bg-slate-800 p-6 rounded-xl shadow border dark:border-slate-700\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"courseId\",value:form.courseId,onChange:handleChange,className:\"w-full px-4 py-2 rounded border border-green-300 dark:border-slate-600 dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-emerald-400\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a course\"}),courses.length===0?/*#__PURE__*/_jsx(\"option\",{disabled:true,children:\"No courses available\"}):courses.map(course=>/*#__PURE__*/_jsx(\"option\",{value:course.courseId,children:course.title},course.courseId))]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",placeholder:\"Assessment Title\",value:form.title,onChange:handleChange,className:\"w-full px-4 py-2 border border-green-300 dark:border-slate-600 rounded dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-emerald-400\",required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"questions\",placeholder:\"Questions (as JSON)\",value:form.questions,onChange:handleChange,className:\"w-full px-4 py-2 border border-green-300 dark:border-slate-600 rounded dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-emerald-400\",rows:6,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"maxScore\",placeholder:\"Max Score\",value:form.maxScore,onChange:handleChange,className:\"w-full px-4 py-2 border border-green-300 dark:border-slate-600 rounded dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-emerald-400\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white px-5 py-2.5 rounded-md font-semibold transition shadow-md\",children:\"\\uD83D\\uDCBE Update Assessment\"})]})]});};export default EditAssessmentPage;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","api","motion","jsx","_jsx","jsxs","_jsxs","EditAssessmentPage","id","navigate","form","setForm","courseId","title","maxScore","questions","courses","setCourses","errorMessage","setErrorMessage","fetchData","assessmentRes","coursesRes","Promise","all","get","concat","a","data","err","console","error","handleChange","e","name","value","target","prev","_objectSpread","handleUpdateAssessment","preventDefault","JSON","parse","payload","question","put","div","className","initial","opacity","y","animate","transition","duration","children","onSubmit","onChange","required","length","disabled","map","course","type","placeholder","rows"],"sources":["C:/assigment/EduSyncApiSolution/edusync-front/src/pages/EditAssessmentPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport api from '../api/axios';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst EditAssessmentPage = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [form, setForm] = useState({\r\n    courseId: '',\r\n    title: '',\r\n    maxScore: 100,\r\n    questions: '',\r\n  });\r\n\r\n  const [courses, setCourses] = useState([]);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const [assessmentRes, coursesRes] = await Promise.all([\r\n          api.get(`/Assessments/${id}`),\r\n          api.get('/Course'),\r\n        ]);\r\n\r\n        const a = assessmentRes.data;\r\n        setForm({\r\n          courseId: a.courseId || '',\r\n          title: a.title || '',\r\n          maxScore: a.maxScore || 100,\r\n          questions: a.questions || '',\r\n        });\r\n\r\n        setCourses(coursesRes.data);\r\n      } catch (err) {\r\n        console.error('Error loading assessment or courses:', err);\r\n        setErrorMessage('Failed to load assessment or courses. Please try again later.');\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [id]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setForm((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleUpdateAssessment = async (e) => {\r\n    e.preventDefault();\r\n    setErrorMessage('');\r\n\r\n    try {\r\n      JSON.parse(form.questions); // Validate JSON format\r\n      const payload = {\r\n        ...form,\r\n        question: form.questions, // in case backend uses `question`\r\n      };\r\n\r\n      await api.put(`/Assessments/${id}`, payload);\r\n      navigate('/assessments');\r\n    } catch (error) {\r\n      setErrorMessage('❗ Please enter valid JSON format in the \"Questions\" field.');\r\n      console.error('Update failed:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"p-6 max-w-3xl mx-auto bg-gradient-to-br from-white via-green-50 to-emerald-100 dark:from-slate-800 dark:via-slate-900 dark:to-slate-800 rounded-xl shadow-xl\"\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.5 }}\r\n    >\r\n      <h2 className=\"text-3xl font-bold text-center mb-6 bg-gradient-to-r from-emerald-500 to-teal-500 text-transparent bg-clip-text\">\r\n        ✏️ Edit Assessment\r\n      </h2>\r\n\r\n      {errorMessage && (\r\n        <p className=\"text-red-600 dark:text-red-400 font-medium mb-4 text-center\">{errorMessage}</p>\r\n      )}\r\n\r\n      <form\r\n        onSubmit={handleUpdateAssessment}\r\n        className=\"space-y-4 bg-white dark:bg-slate-800 p-6 rounded-xl shadow border dark:border-slate-700\"\r\n      >\r\n        <select\r\n          name=\"courseId\"\r\n          value={form.courseId}\r\n          onChange={handleChange}\r\n          className=\"w-full px-4 py-2 rounded border border-green-300 dark:border-slate-600 dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-emerald-400\"\r\n          required\r\n        >\r\n          <option value=\"\">Select a course</option>\r\n          {courses.length === 0 ? (\r\n            <option disabled>No courses available</option>\r\n          ) : (\r\n            courses.map((course) => (\r\n              <option key={course.courseId} value={course.courseId}>\r\n                {course.title}\r\n              </option>\r\n            ))\r\n          )}\r\n        </select>\r\n\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          placeholder=\"Assessment Title\"\r\n          value={form.title}\r\n          onChange={handleChange}\r\n          className=\"w-full px-4 py-2 border border-green-300 dark:border-slate-600 rounded dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-emerald-400\"\r\n          required\r\n        />\r\n\r\n        <textarea\r\n          name=\"questions\"\r\n          placeholder=\"Questions (as JSON)\"\r\n          value={form.questions}\r\n          onChange={handleChange}\r\n          className=\"w-full px-4 py-2 border border-green-300 dark:border-slate-600 rounded dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-emerald-400\"\r\n          rows={6}\r\n          required\r\n        />\r\n\r\n        <input\r\n          type=\"number\"\r\n          name=\"maxScore\"\r\n          placeholder=\"Max Score\"\r\n          value={form.maxScore}\r\n          onChange={handleChange}\r\n          className=\"w-full px-4 py-2 border border-green-300 dark:border-slate-600 rounded dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-emerald-400\"\r\n        />\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white px-5 py-2.5 rounded-md font-semibold transition shadow-md\"\r\n        >\r\n          💾 Update Assessment\r\n        </button>\r\n      </form>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default EditAssessmentPage;\r\n"],"mappings":"kIAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,GAAG,KAAM,cAAc,CAC9B,OAASC,MAAM,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,KAAM,CAAAC,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAAEC,EAAG,CAAC,CAAGT,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAU,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACU,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,CAC/Bc,QAAQ,CAAE,EAAE,CACZC,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,GAAG,CACbC,SAAS,CAAE,EACb,CAAC,CAAC,CAEF,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACoB,YAAY,CAAEC,eAAe,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAEpDD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAACC,aAAa,CAAEC,UAAU,CAAC,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CACpDvB,GAAG,CAACwB,GAAG,iBAAAC,MAAA,CAAiBlB,EAAE,CAAE,CAAC,CAC7BP,GAAG,CAACwB,GAAG,CAAC,SAAS,CAAC,CACnB,CAAC,CAEF,KAAM,CAAAE,CAAC,CAAGN,aAAa,CAACO,IAAI,CAC5BjB,OAAO,CAAC,CACNC,QAAQ,CAAEe,CAAC,CAACf,QAAQ,EAAI,EAAE,CAC1BC,KAAK,CAAEc,CAAC,CAACd,KAAK,EAAI,EAAE,CACpBC,QAAQ,CAAEa,CAAC,CAACb,QAAQ,EAAI,GAAG,CAC3BC,SAAS,CAAEY,CAAC,CAACZ,SAAS,EAAI,EAC5B,CAAC,CAAC,CAEFE,UAAU,CAACK,UAAU,CAACM,IAAI,CAAC,CAC7B,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,sCAAsC,CAAEF,GAAG,CAAC,CAC1DV,eAAe,CAAC,+DAA+D,CAAC,CAClF,CACF,CAAC,CACDC,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACZ,EAAE,CAAC,CAAC,CAER,KAAM,CAAAwB,YAAY,CAAIC,CAAC,EAAK,CAC1B,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChCzB,OAAO,CAAE0B,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,MAAE,CAACH,IAAI,EAAGC,KAAK,EAAG,CAAC,CACjD,CAAC,CAED,KAAM,CAAAI,sBAAsB,CAAG,KAAO,CAAAN,CAAC,EAAK,CAC1CA,CAAC,CAACO,cAAc,CAAC,CAAC,CAClBrB,eAAe,CAAC,EAAE,CAAC,CAEnB,GAAI,CACFsB,IAAI,CAACC,KAAK,CAAChC,IAAI,CAACK,SAAS,CAAC,CAAE;AAC5B,KAAM,CAAA4B,OAAO,CAAAL,aAAA,CAAAA,aAAA,IACR5B,IAAI,MACPkC,QAAQ,CAAElC,IAAI,CAACK,SAAW;AAAA,EAC3B,CAED,KAAM,CAAAd,GAAG,CAAC4C,GAAG,iBAAAnB,MAAA,CAAiBlB,EAAE,EAAImC,OAAO,CAAC,CAC5ClC,QAAQ,CAAC,cAAc,CAAC,CAC1B,CAAE,MAAOsB,KAAK,CAAE,CACdZ,eAAe,CAAC,4DAA4D,CAAC,CAC7EW,OAAO,CAACC,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACxC,CACF,CAAC,CAED,mBACEzB,KAAA,CAACJ,MAAM,CAAC4C,GAAG,EACTC,SAAS,CAAC,8JAA8J,CACxKC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,EAAG,CAAE,CAC/BC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,UAAU,CAAE,CAAEC,QAAQ,CAAE,GAAI,CAAE,CAAAC,QAAA,eAE9BlD,IAAA,OAAI2C,SAAS,CAAC,iHAAiH,CAAAO,QAAA,CAAC,8BAEhI,CAAI,CAAC,CAEJpC,YAAY,eACXd,IAAA,MAAG2C,SAAS,CAAC,6DAA6D,CAAAO,QAAA,CAAEpC,YAAY,CAAI,CAC7F,cAEDZ,KAAA,SACEiD,QAAQ,CAAEhB,sBAAuB,CACjCQ,SAAS,CAAC,yFAAyF,CAAAO,QAAA,eAEnGhD,KAAA,WACE4B,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEzB,IAAI,CAACE,QAAS,CACrB4C,QAAQ,CAAExB,YAAa,CACvBe,SAAS,CAAC,6JAA6J,CACvKU,QAAQ,MAAAH,QAAA,eAERlD,IAAA,WAAQ+B,KAAK,CAAC,EAAE,CAAAmB,QAAA,CAAC,iBAAe,CAAQ,CAAC,CACxCtC,OAAO,CAAC0C,MAAM,GAAK,CAAC,cACnBtD,IAAA,WAAQuD,QAAQ,MAAAL,QAAA,CAAC,sBAAoB,CAAQ,CAAC,CAE9CtC,OAAO,CAAC4C,GAAG,CAAEC,MAAM,eACjBzD,IAAA,WAA8B+B,KAAK,CAAE0B,MAAM,CAACjD,QAAS,CAAA0C,QAAA,CAClDO,MAAM,CAAChD,KAAK,EADFgD,MAAM,CAACjD,QAEZ,CACT,CACF,EACK,CAAC,cAETR,IAAA,UACE0D,IAAI,CAAC,MAAM,CACX5B,IAAI,CAAC,OAAO,CACZ6B,WAAW,CAAC,kBAAkB,CAC9B5B,KAAK,CAAEzB,IAAI,CAACG,KAAM,CAClB2C,QAAQ,CAAExB,YAAa,CACvBe,SAAS,CAAC,6JAA6J,CACvKU,QAAQ,MACT,CAAC,cAEFrD,IAAA,aACE8B,IAAI,CAAC,WAAW,CAChB6B,WAAW,CAAC,qBAAqB,CACjC5B,KAAK,CAAEzB,IAAI,CAACK,SAAU,CACtByC,QAAQ,CAAExB,YAAa,CACvBe,SAAS,CAAC,6JAA6J,CACvKiB,IAAI,CAAE,CAAE,CACRP,QAAQ,MACT,CAAC,cAEFrD,IAAA,UACE0D,IAAI,CAAC,QAAQ,CACb5B,IAAI,CAAC,UAAU,CACf6B,WAAW,CAAC,WAAW,CACvB5B,KAAK,CAAEzB,IAAI,CAACI,QAAS,CACrB0C,QAAQ,CAAExB,YAAa,CACvBe,SAAS,CAAC,6JAA6J,CACxK,CAAC,cAEF3C,IAAA,WACE0D,IAAI,CAAC,QAAQ,CACbf,SAAS,CAAC,oKAAoK,CAAAO,QAAA,CAC/K,gCAED,CAAQ,CAAC,EACL,CAAC,EACG,CAAC,CAEjB,CAAC,CAED,cAAe,CAAA/C,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}