{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../api/axios';import{motion}from'framer-motion';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ResultsPage=()=>{const[data,setData]=useState([]);const[loading,setLoading]=useState(true);const instructorId=localStorage.getItem('userId');const[assessmentFilter,setAssessmentFilter]=useState('');const[assessments,setAssessments]=useState([]);useEffect(()=>{const fetchData=async()=>{try{const[coursesRes,assessmentsRes,resultsRes,usersRes]=await Promise.all([api.get('/Courses'),api.get('/Assessments'),api.get('/Results'),api.get('/Users')]);const instructorCourses=coursesRes.data.filter(c=>c.instructorId===instructorId);const courseMap=Object.fromEntries(instructorCourses.map(c=>[c.courseId,c.title]));const instructorAssessments=assessmentsRes.data.filter(a=>courseMap[a.courseId]);setAssessments(instructorAssessments);const assessmentMap=Object.fromEntries(instructorAssessments.map(a=>[a.assessmentId,courseMap[a.courseId]]));const usersMap=Object.fromEntries(usersRes.data.map(u=>[u.userId,u.fullName||u.name||'Unknown']));const filteredResults=resultsRes.data.filter(r=>assessmentMap[r.assessmentId]).map((r,i)=>({id:i+1,student:usersMap[r.userId],course:assessmentMap[r.assessmentId],assessmentId:r.assessmentId,score:r.score,date:new Date(r.attemptDate).toLocaleString('en-IN')}));setData(filteredResults);}catch(err){console.error('Error loading results',err);}finally{setLoading(false);}};fetchData();},[instructorId]);const filteredData=assessmentFilter?data.filter(d=>d.assessmentId===assessmentFilter):data;return/*#__PURE__*/_jsxs(motion.div,{className:\"p-6 bg-mint-50 min-h-screen\",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:0.5},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-6 text-emerald-700 text-center\",children:\"Assessment Results\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 max-w-md mx-auto\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium text-emerald-800 mb-2\",children:\"Filter by assessment:\"}),/*#__PURE__*/_jsxs(\"select\",{value:assessmentFilter,onChange:e=>setAssessmentFilter(e.target.value),className:\"w-full px-4 py-2 border border-emerald-200 bg-emerald-50 text-emerald-900 rounded focus:outline-none focus:ring-2 focus:ring-emerald-400\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- All Assessments --\"}),assessments.map(a=>/*#__PURE__*/_jsx(\"option\",{value:a.assessmentId,children:a.title},a.assessmentId))]})]}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-emerald-500 text-center\",children:\"Loading...\"}):filteredData.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-emerald-500 text-center\",children:\"No results found.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto shadow-md rounded-xl border border-emerald-200 bg-white\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table-auto w-full text-sm text-left text-emerald-800\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-emerald-100 text-emerald-900\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border border-emerald-200\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border border-emerald-200\",children:\"Student\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border border-emerald-200\",children:\"Course\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border border-emerald-200\",children:\"Score\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border border-emerald-200\",children:\"Attempted On\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredData.map((item,index)=>/*#__PURE__*/_jsxs(motion.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:index*0.04},className:\"hover:bg-emerald-50 transition\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 border border-emerald-100\",children:item.id}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 border border-emerald-100\",children:item.student}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 border border-emerald-100\",children:item.course}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 border border-emerald-100\",children:item.score}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 border border-emerald-100\",children:item.date})]},item.id))})]})})]});};export default ResultsPage;","map":{"version":3,"names":["React","useEffect","useState","api","motion","jsx","_jsx","jsxs","_jsxs","ResultsPage","data","setData","loading","setLoading","instructorId","localStorage","getItem","assessmentFilter","setAssessmentFilter","assessments","setAssessments","fetchData","coursesRes","assessmentsRes","resultsRes","usersRes","Promise","all","get","instructorCourses","filter","c","courseMap","Object","fromEntries","map","courseId","title","instructorAssessments","a","assessmentMap","assessmentId","usersMap","u","userId","fullName","name","filteredResults","r","i","id","student","course","score","date","Date","attemptDate","toLocaleString","err","console","error","filteredData","d","div","className","initial","opacity","y","animate","transition","duration","children","value","onChange","e","target","length","item","index","tr","delay"],"sources":["C:/assigment/EduSyncApiSolution/edusync-front/src/pages/StudentsListPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../api/axios';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst ResultsPage = () => {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const instructorId = localStorage.getItem('userId');\r\n  const [assessmentFilter, setAssessmentFilter] = useState('');\r\n  const [assessments, setAssessments] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const [coursesRes, assessmentsRes, resultsRes, usersRes] = await Promise.all([\r\n          api.get('/Courses'),\r\n          api.get('/Assessments'),\r\n          api.get('/Results'),\r\n          api.get('/Users'),\r\n        ]);\r\n\r\n        const instructorCourses = coursesRes.data.filter(c => c.instructorId === instructorId);\r\n        const courseMap = Object.fromEntries(instructorCourses.map(c => [c.courseId, c.title]));\r\n\r\n        const instructorAssessments = assessmentsRes.data.filter(a => courseMap[a.courseId]);\r\n        setAssessments(instructorAssessments);\r\n\r\n        const assessmentMap = Object.fromEntries(instructorAssessments.map(a => [a.assessmentId, courseMap[a.courseId]]));\r\n        const usersMap = Object.fromEntries(usersRes.data.map(u => [u.userId, u.fullName || u.name || 'Unknown']));\r\n\r\n        const filteredResults = resultsRes.data\r\n          .filter(r => assessmentMap[r.assessmentId])\r\n          .map((r, i) => ({\r\n            id: i + 1,\r\n            student: usersMap[r.userId],\r\n            course: assessmentMap[r.assessmentId],\r\n            assessmentId: r.assessmentId,\r\n            score: r.score,\r\n            date: new Date(r.attemptDate).toLocaleString('en-IN'),\r\n          }));\r\n\r\n        setData(filteredResults);\r\n      } catch (err) {\r\n        console.error('Error loading results', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [instructorId]);\r\n\r\n  const filteredData = assessmentFilter\r\n    ? data.filter((d) => d.assessmentId === assessmentFilter)\r\n    : data;\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"p-6 bg-mint-50 min-h-screen\"\r\n      initial={{ opacity: 0, y: 30 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.5 }}\r\n    >\r\n      <h2 className=\"text-3xl font-bold mb-6 text-emerald-700 text-center\">\r\n        Assessment Results\r\n      </h2>\r\n\r\n      <div className=\"mb-6 max-w-md mx-auto\">\r\n        <label className=\"block font-medium text-emerald-800 mb-2\">\r\n          Filter by assessment:\r\n        </label>\r\n        <select\r\n          value={assessmentFilter}\r\n          onChange={(e) => setAssessmentFilter(e.target.value)}\r\n          className=\"w-full px-4 py-2 border border-emerald-200 bg-emerald-50 text-emerald-900 rounded focus:outline-none focus:ring-2 focus:ring-emerald-400\"\r\n        >\r\n          <option value=\"\">-- All Assessments --</option>\r\n          {assessments.map((a) => (\r\n            <option key={a.assessmentId} value={a.assessmentId}>\r\n              {a.title}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <p className=\"text-emerald-500 text-center\">Loading...</p>\r\n      ) : filteredData.length === 0 ? (\r\n        <p className=\"text-emerald-500 text-center\">No results found.</p>\r\n      ) : (\r\n        <div className=\"overflow-x-auto shadow-md rounded-xl border border-emerald-200 bg-white\">\r\n          <table className=\"table-auto w-full text-sm text-left text-emerald-800\">\r\n            <thead className=\"bg-emerald-100 text-emerald-900\">\r\n              <tr>\r\n                <th className=\"px-4 py-2 border border-emerald-200\">#</th>\r\n                <th className=\"px-4 py-2 border border-emerald-200\">Student</th>\r\n                <th className=\"px-4 py-2 border border-emerald-200\">Course</th>\r\n                <th className=\"px-4 py-2 border border-emerald-200\">Score</th>\r\n                <th className=\"px-4 py-2 border border-emerald-200\">Attempted On</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredData.map((item, index) => (\r\n                <motion.tr\r\n                  key={item.id}\r\n                  initial={{ opacity: 0, y: 10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ delay: index * 0.04 }}\r\n                  className=\"hover:bg-emerald-50 transition\"\r\n                >\r\n                  <td className=\"px-4 py-2 border border-emerald-100\">{item.id}</td>\r\n                  <td className=\"px-4 py-2 border border-emerald-100\">{item.student}</td>\r\n                  <td className=\"px-4 py-2 border border-emerald-100\">{item.course}</td>\r\n                  <td className=\"px-4 py-2 border border-emerald-100\">{item.score}</td>\r\n                  <td className=\"px-4 py-2 border border-emerald-100\">{item.date}</td>\r\n                </motion.tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default ResultsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}