{"ast":null,"code":"import _objectSpread from\"C:/assigment/EduSyncApiSolution/edusync-front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import api from'../api/axios';import{motion}from'framer-motion';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TakeAssessmentPage=()=>{const{id}=useParams();const[assessment,setAssessment]=useState(null);const[questions,setQuestions]=useState([]);const[answers,setAnswers]=useState({});const[submitted,setSubmitted]=useState(false);const[score,setScore]=useState(null);const[startTime,setStartTime]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[resultSubmitted,setResultSubmitted]=useState(false);const navigate=useNavigate();const getAuthHeaders=()=>{const token=localStorage.getItem('token')||localStorage.getItem('authToken')||localStorage.getItem('accessToken');if(!token)throw new Error('No authentication token found. Please log in again.');return{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'};};const parseFormattedQuestions=questionText=>{if(!questionText||questionText.trim()==='')return[];const questionBlocks=questionText.split('\\n\\n').filter(block=>block.trim()!=='');const parsedQuestions=[];for(const block of questionBlocks){const lines=block.split('\\n').map(line=>line.trim()).filter(line=>line!=='');if(lines.length<3)continue;try{const questionText=lines[0].replace(/^Q\\d+:\\s*/,'').trim();const optionsLine=lines.find(line=>line.startsWith('Options:'));if(!optionsLine)continue;const optionsText=optionsLine.replace(/^Options:\\s*/,'').trim();const options=optionsText.split(',').map(opt=>opt.trim()).filter(opt=>opt!=='');const answerLine=lines.find(line=>line.startsWith('Answer:'));if(!answerLine)continue;const correctAnswer=answerLine.replace(/^Answer:\\s*/,'').trim();if(questionText&&options.length>0&&correctAnswer){parsedQuestions.push({questionText,options,correctAnswer});}}catch(err){console.warn('Failed to parse question block:',block,err);continue;}}return parsedQuestions;};useEffect(()=>{const fetchAssessment=async()=>{try{setLoading(true);setError(null);const headers=getAuthHeaders();const res=await api.get(\"/Assessments/\".concat(id),{headers});setAssessment(res.data);let parsedQuestions=[];if(res.data.question){try{parsedQuestions=JSON.parse(res.data.question);if(!Array.isArray(parsedQuestions))parsedQuestions=[];}catch(_unused){parsedQuestions=parseFormattedQuestions(res.data.question);}}setQuestions(parsedQuestions);setStartTime(Date.now());}catch(err){var _err$response,_err$response2;console.error('Failed to load assessment',err);if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401)setError('Authentication failed. Please log in again.');else if(((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===403)setError('You don\\'t have permission to access this assessment.');else if(err.message.includes('No authentication token'))setError(err.message);else setError('Failed to load assessment. Please try again later.');}finally{setLoading(false);}};if(id)fetchAssessment();},[id]);const handleOptionSelect=(qIndex,option)=>{if(submitted)return;setAnswers(prev=>_objectSpread(_objectSpread({},prev),{},{[qIndex]:option}));};const handleSubmit=async()=>{if(submitted||questions.length===0)return;try{let correct=0;questions.forEach((q,i)=>{if(answers[i]===q.correctAnswer)correct++;});const calculatedScore=Math.round(correct/questions.length*assessment.maxScore);setScore(calculatedScore);setSubmitted(true);const timeTaken=Math.floor((Date.now()-startTime)/1000);const resultData={assessmentId:assessment.assessmentId,assessmentTitle:assessment.title,score:calculatedScore,maxScore:assessment.maxScore,timeTaken,attemptDate:new Date().toISOString(),questions:questions.length,correctAnswers:correct};try{const existingResults=JSON.parse(localStorage.getItem('userResults')||'[]');existingResults.push(resultData);localStorage.setItem('userResults',JSON.stringify(existingResults));}catch(storageErr){console.warn('Failed to store result locally:',storageErr);}try{const headers=getAuthHeaders();await api.post('/Results',{assessmentId:assessment.assessmentId,userId:localStorage.getItem('userId'),score:calculatedScore,attemptDate:new Date().toISOString(),timeTaken},{headers});setResultSubmitted(true);}catch(submitErr){console.warn('Failed to submit to backend:',submitErr);setResultSubmitted(false);}}catch(err){console.error('Failed to process assessment result:',err);alert('Failed to process your assessment. Please try again.');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"p-6 max-w-4xl mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500\"})})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"p-6 max-w-4xl mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold mb-2\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"mt-3 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",children:\"Retry\"})]})});}if(!assessment)return/*#__PURE__*/_jsx(\"p\",{className:\"p-6 text-slate-500\",children:\"Loading assessment...\"});return/*#__PURE__*/_jsxs(motion.div,{className:\"p-6 max-w-4xl mx-auto\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-500 mb-6 text-center\",children:assessment.title}),submitted&&/*#__PURE__*/_jsxs(motion.div,{className:\"text-center bg-green-50 dark:bg-slate-800 p-6 rounded-xl shadow-md mb-6\",initial:{scale:0.95,opacity:0},animate:{scale:1,opacity:1},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl text-emerald-600 dark:text-green-400 font-semibold mb-2\",children:[\"\\uD83C\\uDF89 You scored \",/*#__PURE__*/_jsx(\"strong\",{children:score}),\" / \",assessment.maxScore]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-600 dark:text-slate-400 mb-4\",children:[\"\\u23F1\\uFE0F Time Taken: \",Math.floor((Date.now()-startTime)/1000),\" seconds\"]}),!resultSubmitted&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-orange-600 dark:text-orange-400 mb-3\",children:\"\\u2139\\uFE0F Result saved locally (backend submission may require instructor permissions)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/student/results'),className:\"bg-emerald-500 hover:bg-emerald-600 text-white py-2 px-5 rounded-lg transition\",children:\"View My Results\"})]}),questions.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 dark:text-slate-400 text-lg mb-4\",children:\"No questions found for this assessment.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 dark:text-slate-500 text-sm\",children:\"The assessment may not have been set up properly or the questions are in an unsupported format.\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(motion.form,{className:\"space-y-6\",children:questions.map((q,index)=>{const selected=answers[index];const isCorrect=selected===q.correctAnswer;return/*#__PURE__*/_jsxs(motion.div,{className:\"p-5 rounded-xl shadow border transition \".concat(submitted?isCorrect?'bg-green-50 border-green-300 dark:bg-green-900 dark:border-green-700':'bg-red-50 border-red-300 dark:bg-red-900 dark:border-red-700':'bg-emerald-50 border-emerald-200 dark:bg-slate-800 dark:border-slate-700'),children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-3 text-teal-700 dark:text-teal-300\",children:[\"Q\",index+1,\". \",q.questionText]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:q.options&&q.options.map((option,oIndex)=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm cursor-pointer \".concat(submitted&&option===q.correctAnswer?'text-green-700 dark:text-green-300':submitted&&option===selected&&option!==q.correctAnswer?'text-red-600 dark:text-red-300':'text-slate-700 dark:text-slate-300'),children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"question-\".concat(index),value:option,disabled:submitted,checked:selected===option,onChange:()=>handleOptionSelect(index,option),className:\"accent-emerald-600\"}),option]},oIndex))}),submitted&&selected!==q.correctAnswer&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-sm text-red-600 dark:text-red-400\",children:[\"Correct Answer: \",/*#__PURE__*/_jsx(\"strong\",{children:q.correctAnswer})]})]},index);})}),!submitted&&/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:Object.keys(answers).length===0,className:\"mt-8 block mx-auto px-6 py-2 rounded-lg transition font-semibold \".concat(Object.keys(answers).length===0?'bg-gray-300 text-gray-600 cursor-not-allowed':'bg-emerald-500 hover:bg-emerald-600 text-white'),children:\"Submit Assessment\"})]})]});};export default TakeAssessmentPage;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","api","motion","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TakeAssessmentPage","id","assessment","setAssessment","questions","setQuestions","answers","setAnswers","submitted","setSubmitted","score","setScore","startTime","setStartTime","loading","setLoading","error","setError","resultSubmitted","setResultSubmitted","navigate","getAuthHeaders","token","localStorage","getItem","Error","concat","parseFormattedQuestions","questionText","trim","questionBlocks","split","filter","block","parsedQuestions","lines","map","line","length","replace","optionsLine","find","startsWith","optionsText","options","opt","answerLine","correctAnswer","push","err","console","warn","fetchAssessment","headers","res","get","data","question","JSON","parse","Array","isArray","_unused","Date","now","_err$response","_err$response2","response","status","message","includes","handleOptionSelect","qIndex","option","prev","_objectSpread","handleSubmit","correct","forEach","q","i","calculatedScore","Math","round","maxScore","timeTaken","floor","resultData","assessmentId","assessmentTitle","title","attemptDate","toISOString","correctAnswers","existingResults","setItem","stringify","storageErr","post","userId","submitErr","alert","className","children","onClick","window","location","reload","div","initial","opacity","y","animate","transition","duration","scale","form","index","selected","isCorrect","oIndex","type","name","value","disabled","checked","onChange","Object","keys"],"sources":["C:/assigment/EduSyncApiSolution/edusync-front/src/pages/TakeAssessmentPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport api from '../api/axios';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst TakeAssessmentPage = () => {\r\n  const { id } = useParams();\r\n  const [assessment, setAssessment] = useState(null);\r\n  const [questions, setQuestions] = useState([]);\r\n  const [answers, setAnswers] = useState({});\r\n  const [submitted, setSubmitted] = useState(false);\r\n  const [score, setScore] = useState(null);\r\n  const [startTime, setStartTime] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [resultSubmitted, setResultSubmitted] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const getAuthHeaders = () => {\r\n    const token = localStorage.getItem('token') || localStorage.getItem('authToken') || localStorage.getItem('accessToken');\r\n    if (!token) throw new Error('No authentication token found. Please log in again.');\r\n    return {\r\n      'Authorization': `Bearer ${token}`,\r\n      'Content-Type': 'application/json'\r\n    };\r\n  };\r\n\r\n  const parseFormattedQuestions = (questionText) => {\r\n    if (!questionText || questionText.trim() === '') return [];\r\n    const questionBlocks = questionText.split('\\n\\n').filter(block => block.trim() !== '');\r\n    const parsedQuestions = [];\r\n\r\n    for (const block of questionBlocks) {\r\n      const lines = block.split('\\n').map(line => line.trim()).filter(line => line !== '');\r\n      if (lines.length < 3) continue;\r\n      try {\r\n        const questionText = lines[0].replace(/^Q\\d+:\\s*/, '').trim();\r\n        const optionsLine = lines.find(line => line.startsWith('Options:'));\r\n        if (!optionsLine) continue;\r\n        const optionsText = optionsLine.replace(/^Options:\\s*/, '').trim();\r\n        const options = optionsText.split(',').map(opt => opt.trim()).filter(opt => opt !== '');\r\n        const answerLine = lines.find(line => line.startsWith('Answer:'));\r\n        if (!answerLine) continue;\r\n        const correctAnswer = answerLine.replace(/^Answer:\\s*/, '').trim();\r\n\r\n        if (questionText && options.length > 0 && correctAnswer) {\r\n          parsedQuestions.push({ questionText, options, correctAnswer });\r\n        }\r\n      } catch (err) {\r\n        console.warn('Failed to parse question block:', block, err);\r\n        continue;\r\n      }\r\n    }\r\n\r\n    return parsedQuestions;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchAssessment = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        const headers = getAuthHeaders();\r\n        const res = await api.get(`/Assessments/${id}`, { headers });\r\n        setAssessment(res.data);\r\n\r\n        let parsedQuestions = [];\r\n        if (res.data.question) {\r\n          try {\r\n            parsedQuestions = JSON.parse(res.data.question);\r\n            if (!Array.isArray(parsedQuestions)) parsedQuestions = [];\r\n          } catch {\r\n            parsedQuestions = parseFormattedQuestions(res.data.question);\r\n          }\r\n        }\r\n\r\n        setQuestions(parsedQuestions);\r\n        setStartTime(Date.now());\r\n      } catch (err) {\r\n        console.error('Failed to load assessment', err);\r\n        if (err.response?.status === 401) setError('Authentication failed. Please log in again.');\r\n        else if (err.response?.status === 403) setError('You don\\'t have permission to access this assessment.');\r\n        else if (err.message.includes('No authentication token')) setError(err.message);\r\n        else setError('Failed to load assessment. Please try again later.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (id) fetchAssessment();\r\n  }, [id]);\r\n\r\n  const handleOptionSelect = (qIndex, option) => {\r\n    if (submitted) return;\r\n    setAnswers(prev => ({ ...prev, [qIndex]: option }));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (submitted || questions.length === 0) return;\r\n\r\n    try {\r\n      let correct = 0;\r\n      questions.forEach((q, i) => {\r\n        if (answers[i] === q.correctAnswer) correct++;\r\n      });\r\n\r\n      const calculatedScore = Math.round((correct / questions.length) * assessment.maxScore);\r\n      setScore(calculatedScore);\r\n      setSubmitted(true);\r\n\r\n      const timeTaken = Math.floor((Date.now() - startTime) / 1000);\r\n\r\n      const resultData = {\r\n        assessmentId: assessment.assessmentId,\r\n        assessmentTitle: assessment.title,\r\n        score: calculatedScore,\r\n        maxScore: assessment.maxScore,\r\n        timeTaken,\r\n        attemptDate: new Date().toISOString(),\r\n        questions: questions.length,\r\n        correctAnswers: correct\r\n      };\r\n\r\n      try {\r\n        const existingResults = JSON.parse(localStorage.getItem('userResults') || '[]');\r\n        existingResults.push(resultData);\r\n        localStorage.setItem('userResults', JSON.stringify(existingResults));\r\n      } catch (storageErr) {\r\n        console.warn('Failed to store result locally:', storageErr);\r\n      }\r\n\r\n      try {\r\n        const headers = getAuthHeaders();\r\n        await api.post('/Results', {\r\n          assessmentId: assessment.assessmentId,\r\n          userId: localStorage.getItem('userId'),\r\n          score: calculatedScore,\r\n          attemptDate: new Date().toISOString(),\r\n          timeTaken,\r\n        }, { headers });\r\n\r\n        setResultSubmitted(true);\r\n      } catch (submitErr) {\r\n        console.warn('Failed to submit to backend:', submitErr);\r\n        setResultSubmitted(false);\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('Failed to process assessment result:', err);\r\n      alert('Failed to process your assessment. Please try again.');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-6 max-w-4xl mx-auto\">\r\n        <div className=\"flex justify-center items-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"p-6 max-w-4xl mx-auto\">\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg\">\r\n          <h3 className=\"font-bold mb-2\">Error</h3>\r\n          <p>{error}</p>\r\n          <button \r\n            onClick={() => window.location.reload()} \r\n            className=\"mt-3 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\"\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!assessment) return <p className=\"p-6 text-slate-500\">Loading assessment...</p>;\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"p-6 max-w-4xl mx-auto\"\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.5 }}\r\n    >\r\n      <h2 className=\"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-500 mb-6 text-center\">\r\n        {assessment.title}\r\n      </h2>\r\n\r\n      {submitted && (\r\n        <motion.div\r\n          className=\"text-center bg-green-50 dark:bg-slate-800 p-6 rounded-xl shadow-md mb-6\"\r\n          initial={{ scale: 0.95, opacity: 0 }}\r\n          animate={{ scale: 1, opacity: 1 }}\r\n        >\r\n          <p className=\"text-xl text-emerald-600 dark:text-green-400 font-semibold mb-2\">\r\n            üéâ You scored <strong>{score}</strong> / {assessment.maxScore}\r\n          </p>\r\n          <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-4\">\r\n            ‚è±Ô∏è Time Taken: {Math.floor((Date.now() - startTime) / 1000)} seconds\r\n          </p>\r\n          {!resultSubmitted && (\r\n            <p className=\"text-xs text-orange-600 dark:text-orange-400 mb-3\">\r\n              ‚ÑπÔ∏è Result saved locally (backend submission may require instructor permissions)\r\n            </p>\r\n          )}\r\n          <button\r\n            onClick={() => navigate('/student/results')}\r\n            className=\"bg-emerald-500 hover:bg-emerald-600 text-white py-2 px-5 rounded-lg transition\"\r\n          >\r\n            View My Results\r\n          </button>\r\n        </motion.div>\r\n      )}\r\n\r\n      {questions.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <p className=\"text-slate-500 dark:text-slate-400 text-lg mb-4\">\r\n            No questions found for this assessment.\r\n          </p>\r\n          <p className=\"text-slate-400 dark:text-slate-500 text-sm\">\r\n            The assessment may not have been set up properly or the questions are in an unsupported format.\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <motion.form className=\"space-y-6\">\r\n            {questions.map((q, index) => {\r\n              const selected = answers[index];\r\n              const isCorrect = selected === q.correctAnswer;\r\n\r\n              return (\r\n                <motion.div\r\n                  key={index}\r\n                  className={`p-5 rounded-xl shadow border transition ${\r\n                    submitted\r\n                      ? isCorrect\r\n                        ? 'bg-green-50 border-green-300 dark:bg-green-900 dark:border-green-700'\r\n                        : 'bg-red-50 border-red-300 dark:bg-red-900 dark:border-red-700'\r\n                      : 'bg-emerald-50 border-emerald-200 dark:bg-slate-800 dark:border-slate-700'\r\n                  }`}\r\n                >\r\n                  <h3 className=\"font-semibold mb-3 text-teal-700 dark:text-teal-300\">\r\n                    Q{index + 1}. {q.questionText}\r\n                  </h3>\r\n                  <div className=\"space-y-2\">\r\n                    {q.options && q.options.map((option, oIndex) => (\r\n                      <label\r\n                        key={oIndex}\r\n                        className={`flex items-center gap-2 text-sm cursor-pointer ${\r\n                          submitted && option === q.correctAnswer\r\n                            ? 'text-green-700 dark:text-green-300'\r\n                            : submitted && option === selected && option !== q.correctAnswer\r\n                            ? 'text-red-600 dark:text-red-300'\r\n                            : 'text-slate-700 dark:text-slate-300'\r\n                        }`}\r\n                      >\r\n                        <input\r\n                          type=\"radio\"\r\n                          name={`question-${index}`}\r\n                          value={option}\r\n                          disabled={submitted}\r\n                          checked={selected === option}\r\n                          onChange={() => handleOptionSelect(index, option)}\r\n                          className=\"accent-emerald-600\"\r\n                        />\r\n                        {option}\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {submitted && selected !== q.correctAnswer && (\r\n                    <p className=\"mt-2 text-sm text-red-600 dark:text-red-400\">\r\n                      Correct Answer: <strong>{q.correctAnswer}</strong>\r\n                    </p>\r\n                  )}\r\n                </motion.div>\r\n              );\r\n            })}\r\n          </motion.form>\r\n\r\n          {!submitted && (\r\n            <button\r\n              onClick={handleSubmit}\r\n              disabled={Object.keys(answers).length === 0}\r\n              className={`mt-8 block mx-auto px-6 py-2 rounded-lg transition font-semibold ${\r\n                Object.keys(answers).length === 0\r\n                  ? 'bg-gray-300 text-gray-600 cursor-not-allowed'\r\n                  : 'bg-emerald-500 hover:bg-emerald-600 text-white'\r\n              }`}\r\n            >\r\n              Submit Assessment\r\n            </button>\r\n          )}\r\n        </>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default TakeAssessmentPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}